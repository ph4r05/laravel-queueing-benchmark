--------------
show full processlist
--------------

+-----+---------+-----------------+--------------------+---------+------+--------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
| Id  | User    | Host            | db                 | Command | Time | State        | Info                                                                                                                                                      |
+-----+---------+-----------------+--------------------+---------+------+--------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
|  94 | root    | localhost       | information_schema | Sleep   |  134 |              | NULL                                                                                                                                                      |
| 465 | root    | localhost       | NULL               | Sleep   |    3 |              | NULL                                                                                                                                                      |
| 822 | laravel | localhost:57434 | laravel            | Sleep   |    0 |              | NULL                                                                                                                                                      |
| 832 | laravel | localhost:57458 | laravel            | Sleep   |    0 |              | NULL                                                                                                                                                      |
| 834 | laravel | localhost:57462 | laravel            | Sleep   |    0 |              | NULL                                                                                                                                                      |
| 835 | laravel | localhost:57464 | laravel            | Sleep   |    0 |              | NULL                                                                                                                                                      |
| 836 | laravel | localhost:57466 | laravel            | Sleep   |    1 |              | NULL                                                                                                                                                      |
| 837 | laravel | localhost:57468 | laravel            | Sleep   |    1 |              | NULL                                                                                                                                                      |
| 838 | laravel | localhost:57470 | laravel            | Sleep   |    0 |              | NULL                                                                                                                                                      |
| 839 | laravel | localhost:57484 | laravel            | Sleep   |    0 |              | NULL                                                                                                                                                      |
| 840 | laravel | localhost:57486 | laravel            | Sleep   |    0 |              | NULL                                                                                                                                                      |
| 841 | laravel | localhost:57488 | laravel            | Sleep   |    0 |              | NULL                                                                                                                                                      |
| 842 | laravel | localhost:57502 | laravel            | Sleep   |    0 |              | NULL                                                                                                                                                      |
| 849 | laravel | localhost:57516 | laravel            | Execute |  159 | Sending data | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 850 | laravel | localhost:57518 | laravel            | Execute |  159 | Sending data | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 858 | laravel | localhost:57532 | laravel            | Execute |  159 | updating     | delete from `jobs` where `id` = ?                                                                                                                         |
| 865 | laravel | localhost:57534 | laravel            | Execute |  158 | Sending data | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 866 | laravel | localhost:57536 | laravel            | Execute |  156 | Sending data | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 867 | laravel | localhost:57538 | laravel            | Execute |  156 | Sending data | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 868 | laravel | localhost:57540 | laravel            | Execute |  156 | Sending data | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 869 | laravel | localhost:57542 | laravel            | Execute |  156 | Sending data | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 870 | laravel | localhost:57544 | laravel            | Execute |  156 | Sending data | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 871 | laravel | localhost:57546 | laravel            | Execute |  156 | Sending data | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 872 | root    | localhost       | NULL               | Query   |    0 | starting     | show full processlist                                                                                                                                     |
+-----+---------+-----------------+--------------------+---------+------+--------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
24 rows in set

--------------
SELECT
  r.trx_id waiting_trx_id,
  r.trx_mysql_thread_id waiting_thread,
  r.trx_query waiting_query,
  b.trx_id blocking_trx_id,
  b.trx_mysql_thread_id blocking_thread,
  b.trx_query blocking_query
FROM       information_schema.innodb_lock_waits w
INNER JOIN information_schema.innodb_trx b
  ON b.trx_id = w.blocking_trx_id
INNER JOIN information_schema.innodb_trx r
  ON r.trx_id = w.requesting_trx_id
--------------

+----------------+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
| waiting_trx_id | waiting_thread | waiting_query                                                                                                                                             | blocking_trx_id | blocking_thread | blocking_query                                                                                                                                            |
+----------------+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7333692        |            871 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333690         |             869 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333692        |            871 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333689         |             870 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333692        |            871 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333686         |             868 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333692        |            871 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333684         |             867 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333692        |            871 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333682         |             866 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333692        |            871 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333680         |             865 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333692        |            871 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333678         |             850 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333692        |            871 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333674         |             849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333692        |            871 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333673         |             858 | delete from `jobs` where `id` = ?                                                                                                                         |
| 7333690        |            869 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333689         |             870 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333690        |            869 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333686         |             868 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333690        |            869 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333684         |             867 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333690        |            869 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333682         |             866 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333690        |            869 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333680         |             865 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333690        |            869 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333678         |             850 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333690        |            869 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333674         |             849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333690        |            869 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333673         |             858 | delete from `jobs` where `id` = ?                                                                                                                         |
| 7333689        |            870 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333686         |             868 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333689        |            870 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333684         |             867 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333689        |            870 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333682         |             866 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333689        |            870 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333680         |             865 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333689        |            870 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333678         |             850 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333689        |            870 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333674         |             849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333689        |            870 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333673         |             858 | delete from `jobs` where `id` = ?                                                                                                                         |
| 7333686        |            868 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333684         |             867 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333686        |            868 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333682         |             866 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333686        |            868 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333680         |             865 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333686        |            868 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333678         |             850 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333686        |            868 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333674         |             849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333686        |            868 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333673         |             858 | delete from `jobs` where `id` = ?                                                                                                                         |
| 7333684        |            867 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333682         |             866 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333684        |            867 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333680         |             865 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333684        |            867 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333678         |             850 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333684        |            867 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333674         |             849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333684        |            867 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333673         |             858 | delete from `jobs` where `id` = ?                                                                                                                         |
| 7333682        |            866 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333680         |             865 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333682        |            866 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333678         |             850 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333682        |            866 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333674         |             849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333682        |            866 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333673         |             858 | delete from `jobs` where `id` = ?                                                                                                                         |
| 7333680        |            865 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333678         |             850 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333680        |            865 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333674         |             849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333680        |            865 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333673         |             858 | delete from `jobs` where `id` = ?                                                                                                                         |
| 7333678        |            850 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333674         |             849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
| 7333678        |            850 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333673         |             858 | delete from `jobs` where `id` = ?                                                                                                                         |
| 7333674        |            849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update | 7333673         |             858 | delete from `jobs` where `id` = ?                                                                                                                         |
| 7333673        |            858 | delete from `jobs` where `id` = ?                                                                                                                         | 7333674         |             849 | select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update |
+----------------+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
46 rows in set, 1 warning

--------------
SELECT * FROM INNODB_LOCK_WAITS
--------------

+-------------------+-------------------+-----------------+-------------------+
| requesting_trx_id | requested_lock_id | blocking_trx_id | blocking_lock_id  |
+-------------------+-------------------+-----------------+-------------------+
| 7333692           | 7333692:30:32:299 | 7333690         | 7333690:30:32:299 |
| 7333692           | 7333692:30:32:299 | 7333689         | 7333689:30:32:299 |
| 7333692           | 7333692:30:32:299 | 7333686         | 7333686:30:32:299 |
| 7333692           | 7333692:30:32:299 | 7333684         | 7333684:30:32:299 |
| 7333692           | 7333692:30:32:299 | 7333682         | 7333682:30:32:299 |
| 7333692           | 7333692:30:32:299 | 7333680         | 7333680:30:32:299 |
| 7333692           | 7333692:30:32:299 | 7333678         | 7333678:30:32:299 |
| 7333692           | 7333692:30:32:299 | 7333673         | 7333673:30:32:299 |
| 7333692           | 7333692:30:32:299 | 7333674         | 7333674:30:32:299 |
| 7333690           | 7333690:30:32:299 | 7333689         | 7333689:30:32:299 |
| 7333690           | 7333690:30:32:299 | 7333686         | 7333686:30:32:299 |
| 7333690           | 7333690:30:32:299 | 7333684         | 7333684:30:32:299 |
| 7333690           | 7333690:30:32:299 | 7333682         | 7333682:30:32:299 |
| 7333690           | 7333690:30:32:299 | 7333680         | 7333680:30:32:299 |
| 7333690           | 7333690:30:32:299 | 7333678         | 7333678:30:32:299 |
| 7333690           | 7333690:30:32:299 | 7333673         | 7333673:30:32:299 |
| 7333690           | 7333690:30:32:299 | 7333674         | 7333674:30:32:299 |
| 7333689           | 7333689:30:32:299 | 7333686         | 7333686:30:32:299 |
| 7333689           | 7333689:30:32:299 | 7333684         | 7333684:30:32:299 |
| 7333689           | 7333689:30:32:299 | 7333682         | 7333682:30:32:299 |
| 7333689           | 7333689:30:32:299 | 7333680         | 7333680:30:32:299 |
| 7333689           | 7333689:30:32:299 | 7333678         | 7333678:30:32:299 |
| 7333689           | 7333689:30:32:299 | 7333673         | 7333673:30:32:299 |
| 7333689           | 7333689:30:32:299 | 7333674         | 7333674:30:32:299 |
| 7333686           | 7333686:30:32:299 | 7333684         | 7333684:30:32:299 |
| 7333686           | 7333686:30:32:299 | 7333682         | 7333682:30:32:299 |
| 7333686           | 7333686:30:32:299 | 7333680         | 7333680:30:32:299 |
| 7333686           | 7333686:30:32:299 | 7333678         | 7333678:30:32:299 |
| 7333686           | 7333686:30:32:299 | 7333673         | 7333673:30:32:299 |
| 7333686           | 7333686:30:32:299 | 7333674         | 7333674:30:32:299 |
| 7333684           | 7333684:30:32:299 | 7333682         | 7333682:30:32:299 |
| 7333684           | 7333684:30:32:299 | 7333680         | 7333680:30:32:299 |
| 7333684           | 7333684:30:32:299 | 7333678         | 7333678:30:32:299 |
| 7333684           | 7333684:30:32:299 | 7333673         | 7333673:30:32:299 |
| 7333684           | 7333684:30:32:299 | 7333674         | 7333674:30:32:299 |
| 7333682           | 7333682:30:32:299 | 7333680         | 7333680:30:32:299 |
| 7333682           | 7333682:30:32:299 | 7333678         | 7333678:30:32:299 |
| 7333682           | 7333682:30:32:299 | 7333673         | 7333673:30:32:299 |
| 7333682           | 7333682:30:32:299 | 7333674         | 7333674:30:32:299 |
| 7333680           | 7333680:30:32:299 | 7333678         | 7333678:30:32:299 |
| 7333680           | 7333680:30:32:299 | 7333673         | 7333673:30:32:299 |
| 7333680           | 7333680:30:32:299 | 7333674         | 7333674:30:32:299 |
| 7333678           | 7333678:30:32:299 | 7333673         | 7333673:30:32:299 |
| 7333678           | 7333678:30:32:299 | 7333674         | 7333674:30:32:299 |
| 7333674           | 7333674:30:15:28  | 7333673         | 7333673:30:15:28  |
| 7333673           | 7333673:30:32:299 | 7333674         | 7333674:30:32:299 |
+-------------------+-------------------+-----------------+-------------------+
46 rows in set, 1 warning

--------------
SELECT INNODB_LOCKS.* 
FROM INNODB_LOCKS
JOIN INNODB_LOCK_WAITS
  ON (INNODB_LOCKS.LOCK_TRX_ID = INNODB_LOCK_WAITS.BLOCKING_TRX_ID)
--------------

+-------------------+-------------+-----------+-----------+------------------+------------------+------------+-----------+----------+-------------------+
| lock_id           | lock_trx_id | lock_mode | lock_type | lock_table       | lock_index       | lock_space | lock_page | lock_rec | lock_data         |
+-------------------+-------------+-----------+-----------+------------------+------------------+------------+-----------+----------+-------------------+
| 7333690:30:32:299 | 7333690     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333689:30:32:299 | 7333689     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333686:30:32:299 | 7333686     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333684:30:32:299 | 7333684     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333682:30:32:299 | 7333682     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333680:30:32:299 | 7333680     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333678:30:32:299 | 7333678     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:32:299 | 7333673     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:15:28  | 7333673     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333674:30:32:299 | 7333674     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333674:30:15:28  | 7333674     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333689:30:32:299 | 7333689     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333686:30:32:299 | 7333686     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333684:30:32:299 | 7333684     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333682:30:32:299 | 7333682     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333680:30:32:299 | 7333680     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333678:30:32:299 | 7333678     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:32:299 | 7333673     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:15:28  | 7333673     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333674:30:32:299 | 7333674     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333674:30:15:28  | 7333674     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333686:30:32:299 | 7333686     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333684:30:32:299 | 7333684     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333682:30:32:299 | 7333682     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333680:30:32:299 | 7333680     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333678:30:32:299 | 7333678     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:32:299 | 7333673     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:15:28  | 7333673     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333674:30:32:299 | 7333674     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333674:30:15:28  | 7333674     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333684:30:32:299 | 7333684     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333682:30:32:299 | 7333682     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333680:30:32:299 | 7333680     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333678:30:32:299 | 7333678     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:32:299 | 7333673     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:15:28  | 7333673     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333674:30:32:299 | 7333674     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333674:30:15:28  | 7333674     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333682:30:32:299 | 7333682     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333680:30:32:299 | 7333680     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333678:30:32:299 | 7333678     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:32:299 | 7333673     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:15:28  | 7333673     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333674:30:32:299 | 7333674     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333674:30:15:28  | 7333674     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333680:30:32:299 | 7333680     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333678:30:32:299 | 7333678     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:32:299 | 7333673     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:15:28  | 7333673     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333674:30:32:299 | 7333674     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333674:30:15:28  | 7333674     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333678:30:32:299 | 7333678     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:32:299 | 7333673     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:15:28  | 7333673     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333674:30:32:299 | 7333674     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333674:30:15:28  | 7333674     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333673:30:32:299 | 7333673     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:15:28  | 7333673     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333674:30:32:299 | 7333674     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333674:30:15:28  | 7333674     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333673:30:32:299 | 7333673     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333673:30:15:28  | 7333673     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
| 7333674:30:32:299 | 7333674     | X         | RECORD    | `laravel`.`jobs` | jobs_queue_index |         30 |        32 |      299 | 'default', 139283 |
| 7333674:30:15:28  | 7333674     | X         | RECORD    | `laravel`.`jobs` | PRIMARY          |         30 |        15 |       28 | 139283            |
+-------------------+-------------+-----------+-----------+------------------+------------------+------------+-----------+----------+-------------------+
64 rows in set, 2 warnings

--------------
SHOW ENGINE INNODB STATUS
--------------

*************************** 1. row ***************************
  Type: InnoDB
  Name: 
Status: 
=====================================
2017-12-15 13:47:23 0x7fa5786d2700 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 60 seconds
-----------------
BACKGROUND THREAD
-----------------
srv_master_thread loops: 1091 srv_active, 0 srv_shutdown, 7751 srv_idle
srv_master_thread log flush and writes: 8842
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 1343344
OS WAIT ARRAY INFO: signal count 1044024
RW-shared spins 0, rounds 131816, OS waits 60067
RW-excl spins 0, rounds 313760, OS waits 25074
RW-sx spins 1211, rounds 36316, OS waits 701
Spin rounds per wait: 131816.00 RW-shared, 313760.00 RW-excl, 29.99 RW-sx
------------------------
LATEST DETECTED DEADLOCK
------------------------
2017-12-15 13:11:58 0x7fa57826b700
*** (1) TRANSACTION:
TRANSACTION 7291073, ACTIVE 0 sec updating or deleting
mysql tables in use 1, locked 1
LOCK WAIT 3 lock struct(s), heap size 1136, 2 row lock(s), undo log entries 1
MySQL thread id 94, OS thread handle 140348794578688, query id 4094525 localhost root updating
delete from laravel.jobs
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 792 index jobs_queue_index of table `laravel`.`jobs` trx id 7291073 lock_mode X locks rec but not gap waiting
Record lock, heap no 2 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 000000000001f7fe; asc         ;;

*** (2) TRANSACTION:
TRANSACTION 7291077, ACTIVE 0 sec starting index read
mysql tables in use 1, locked 1
3 lock struct(s), heap size 1136, 2 row lock(s)
MySQL thread id 777, OS thread handle 140348662134528, query id 4094533 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 30 page no 32 n bits 792 index jobs_queue_index of table `laravel`.`jobs` trx id 7291077 lock_mode X
Record lock, heap no 2 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 000000000001f7fe; asc         ;;

*** (2) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 8 n bits 96 index PRIMARY of table `laravel`.`jobs` trx id 7291077 lock_mode X locks rec but not gap waiting
Record lock, heap no 2 PHYSICAL RECORD: n_fields 10; compact format; info bits 32
 0: len 8; hex 000000000001f7fe; asc         ;;
 1: len 6; hex 0000006f40c1; asc    o@ ;;
 2: len 7; hex 6a0000019c12cf; asc j      ;;
 3: len 7; hex 64656661756c74; asc default;;
 4: len 30; hex 7b22646973706c61794e616d65223a224170705c5c4a6f62735c5c576f72; asc {"displayName":"App\\Jobs\\Wor; (total 472 bytes);
 5: len 1; hex 01; asc  ;;
 6: len 4; hex 5a33bc02; asc Z3  ;;
 7: len 4; hex 00000000; asc     ;;
 8: len 4; hex 5a33bb20; asc Z3  ;;
 9: len 1; hex 80; asc  ;;

*** WE ROLL BACK TRANSACTION (2)
------------
TRANSACTIONS
------------
Trx id counter 7333693
Purge done for trx's n:o < 7333676 undo n:o < 0 state: running but idle
History list length 38
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 421824102422128, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102421208, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102420288, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102419368, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102418448, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102417528, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102416608, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102415688, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102414768, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102413848, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102412008, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102401888, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421824102407408, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 7333692, ACTIVE 156 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 1136, 1 row lock(s)
MySQL thread id 871, OS thread handle 140348660930304, query id 4476204 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
------- TRX HAS BEEN WAITING 156 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 824 index jobs_queue_index of table `laravel`.`jobs` trx id 7333692 lock_mode X waiting
Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 0000000000022013; asc         ;;

------------------
---TRANSACTION 7333690, ACTIVE 156 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 1136, 1 row lock(s)
MySQL thread id 869, OS thread handle 140348794177280, query id 4476197 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
------- TRX HAS BEEN WAITING 156 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 824 index jobs_queue_index of table `laravel`.`jobs` trx id 7333690 lock_mode X waiting
Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 0000000000022013; asc         ;;

------------------
---TRANSACTION 7333689, ACTIVE 156 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 1136, 1 row lock(s)
MySQL thread id 870, OS thread handle 140348665546496, query id 4476194 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
------- TRX HAS BEEN WAITING 156 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 824 index jobs_queue_index of table `laravel`.`jobs` trx id 7333689 lock_mode X waiting
Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 0000000000022013; asc         ;;

------------------
---TRANSACTION 7333686, ACTIVE 156 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 1136, 1 row lock(s)
MySQL thread id 868, OS thread handle 140348665747200, query id 4476175 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
------- TRX HAS BEEN WAITING 156 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 824 index jobs_queue_index of table `laravel`.`jobs` trx id 7333686 lock_mode X waiting
Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 0000000000022013; asc         ;;

------------------
---TRANSACTION 7333684, ACTIVE 156 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 1136, 1 row lock(s)
MySQL thread id 867, OS thread handle 140348794377984, query id 4476144 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
------- TRX HAS BEEN WAITING 156 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 824 index jobs_queue_index of table `laravel`.`jobs` trx id 7333684 lock_mode X waiting
Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 0000000000022013; asc         ;;

------------------
---TRANSACTION 7333682, ACTIVE 156 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 1136, 1 row lock(s)
MySQL thread id 866, OS thread handle 140348663740160, query id 4476137 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
------- TRX HAS BEEN WAITING 156 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 824 index jobs_queue_index of table `laravel`.`jobs` trx id 7333682 lock_mode X waiting
Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 0000000000022013; asc         ;;

------------------
---TRANSACTION 7333680, ACTIVE 158 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 1136, 1 row lock(s)
MySQL thread id 865, OS thread handle 140348665145088, query id 4475910 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
------- TRX HAS BEEN WAITING 158 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 824 index jobs_queue_index of table `laravel`.`jobs` trx id 7333680 lock_mode X waiting
Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 0000000000022013; asc         ;;

------------------
---TRANSACTION 7333678, ACTIVE 159 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 2 lock struct(s), heap size 1136, 1 row lock(s)
MySQL thread id 850, OS thread handle 140348667553536, query id 4475892 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
------- TRX HAS BEEN WAITING 159 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 824 index jobs_queue_index of table `laravel`.`jobs` trx id 7333678 lock_mode X waiting
Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 0000000000022013; asc         ;;

------------------
---TRANSACTION 7333674, ACTIVE 159 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 3 lock struct(s), heap size 1136, 2 row lock(s)
MySQL thread id 849, OS thread handle 140348666951424, query id 4475873 localhost 127.0.0.1 laravel Sending data
select * from `jobs` where `queue` = ? and ((`reserved_at` is null and `available_at` <= ?) or (`reserved_at` <= ?)) order by `id` asc limit 1 for update
------- TRX HAS BEEN WAITING 159 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 15 n bits 96 index PRIMARY of table `laravel`.`jobs` trx id 7333674 lock_mode X locks rec but not gap waiting
Record lock, heap no 28 PHYSICAL RECORD: n_fields 10; compact format; info bits 32
 0: len 8; hex 0000000000022013; asc         ;;
 1: len 6; hex 0000006fe729; asc    o );;
 2: len 7; hex 69000001b2110e; asc i      ;;
 3: len 7; hex 64656661756c74; asc default;;
 4: len 30; hex 7b22646973706c61794e616d65223a224170705c5c4a6f62735c5c576f72; asc {"displayName":"App\\Jobs\\Wor; (total 472 bytes);
 5: len 1; hex 01; asc  ;;
 6: len 4; hex 5a33c3bc; asc Z3  ;;
 7: len 4; hex 00000000; asc     ;;
 8: len 4; hex 5a33c026; asc Z3 &;;
 9: len 1; hex 80; asc  ;;

------------------
---TRANSACTION 7333673, ACTIVE 159 sec updating or deleting
mysql tables in use 1, locked 1
LOCK WAIT 3 lock struct(s), heap size 1136, 2 row lock(s), undo log entries 1
MySQL thread id 858, OS thread handle 140348667352832, query id 4475878 localhost 127.0.0.1 laravel updating
delete from `jobs` where `id` = ?
------- TRX HAS BEEN WAITING 159 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 30 page no 32 n bits 824 index jobs_queue_index of table `laravel`.`jobs` trx id 7333673 lock_mode X locks rec but not gap waiting
Record lock, heap no 299 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
 0: len 7; hex 64656661756c74; asc default;;
 1: len 8; hex 0000000000022013; asc         ;;

------------------
--------
FILE I/O
--------
I/O thread 0 state: waiting for completed aio requests (insert buffer thread)
I/O thread 1 state: waiting for completed aio requests (log thread)
I/O thread 2 state: waiting for completed aio requests (read thread)
I/O thread 3 state: waiting for completed aio requests (read thread)
I/O thread 4 state: waiting for completed aio requests (read thread)
I/O thread 5 state: waiting for completed aio requests (read thread)
I/O thread 6 state: waiting for completed aio requests (write thread)
I/O thread 7 state: waiting for completed aio requests (write thread)
I/O thread 8 state: waiting for completed aio requests (write thread)
I/O thread 9 state: waiting for completed aio requests (write thread)
Pending normal aio reads: [0, 0, 0, 0] , aio writes: [0, 0, 0, 0] ,
 ibuf aio reads:, log i/o's:, sync i/o's:
Pending flushes (fsync) log: 0; buffer pool: 0
1494 OS file reads, 347511 OS file writes, 315534 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.00 writes/s, 0.00 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 23, seg size 25, 0 merges
merged operations:
 insert 0, delete mark 0, delete 0
discarded operations:
 insert 0, delete mark 0, delete 0
Hash table size 34673, node heap has 0 buffer(s)
Hash table size 34673, node heap has 0 buffer(s)
Hash table size 34673, node heap has 16 buffer(s)
Hash table size 34673, node heap has 1 buffer(s)
Hash table size 34673, node heap has 1 buffer(s)
Hash table size 34673, node heap has 0 buffer(s)
Hash table size 34673, node heap has 1 buffer(s)
Hash table size 34673, node heap has 0 buffer(s)
308.99 hash searches/s, 112.70 non-hash searches/s
---
LOG
---
Log sequence number 1965676182
Log flushed up to   1965676182
Pages flushed up to 1965676182
Last checkpoint at  1965676173
0 pending log flushes, 0 pending chkp writes
311235 log i/o's done, 0.00 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total large memory allocated 137428992
Dictionary memory allocated 138043
Buffer pool size   8191
Free buffers       6588
Database pages     1584
Old database pages 593
Modified db pages  0
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 7, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 1464, created 120, written 34214
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 1584, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
0 read views open inside InnoDB
Process ID=11327, Main thread ID=140348825573120, state: sleeping
Number of rows inserted 149171, updated 285270, deleted 139283, read 107486086
0.00 inserts/s, 0.00 updates/s, 0.00 deletes/s, 38483.96 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================

1 row in set

Bye
